{"version":3,"sources":["draft-treeview.js"],"names":["treeView","createTreeView","document","createElement","className","pre","appendChild","this","dom","node","addEventListener","e","currentTarget","element","updateTreeView","replacer","key","value","obj","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","getID","err","treeString","stringify","split","join","firstChild","textContent","longestLine","reduce","a","b","length","style","width","Math","min","Draft","Container","require","mixin"],"mappings":"AAAA,cAUA,WAGE,GAAIA,IAKFC,eAAgB,WACd,GAAID,GAAWE,SAASC,cAAc,MACtCH,GAASI,UAAY,WAAY,IAK7BC,GAAMH,SAASC,cAAc,MAYjC,OAXAH,GAASM,YAAYD,GAAKE,KAGrBC,IAAMD,KAAKC,QAChBD,KAAKC,IAAIR,SAAWA,EAEpBO,KAAKC,IAAIC,KAAKC,iBAAiB,SAAU,SAASC,GAEhDA,EAAEC,cAAcC,QAAQC,mBACvB,GAEIP,KAAKO,kBAGdA,eAAgB,WACd,GAAIC,GAAW,SAASC,EAAKC,GAC3B,GAAW,OAAPD,GAAuB,OAAPA,GAAuB,UAAPA,GAA0B,MAAPA,GAAsB,QAAPA,GAAwB,WAAPA,EAAvF,CAEO,GAAW,YAAPA,EAAmB,CAC5B,GAAIE,MAGAC,GAA4B,EAC5BC,GAAoB,EACpBC,EAAiBC,MAErB,KANA,IAAA,GAAyBC,GAAzBC,EAAoBP,EAAKQ,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAE,CAQvB,GARKN,GAAOU,EAAAN,KACdC,GAAIL,EAAQgB,SAAWhB,GAWvB,MAAOiB,GACPV,GAAoB,EACpBC,EAAiBS,EACjB,QACA,KACOX,GAA6BK,EAAAA,WAChCA,EAAAA,YAEF,QACA,GAAIJ,EACF,KAAMC,IAnBZ,MAAOH,GAEP,MAAOD,KAIPc,EAAaxB,KAAKyB,UAAUjB,GAAUkB,MAAM,KAAKC,KAAK,GAC1D3B,MAAKC,IAAIR,SAASmC,WAAWC,YAAc7B,KAAKsB,QAAU,KAAOE,CAEjE,IAAIM,GAAcN,EAAWE,MAAM,MAAMK,OAAO,SAASC,EAAGC,GAC1D,MAAOD,GAAEE,OAASD,EAAEC,OAASF,EAAIC,GAKnC,OAJGjC,MAEEC,IAAIR,SAAS0C,MAAMC,MAAQC,KAAKC,IAAIR,EAAYI,OAAS,EAAG,IAAM,KAEhElC,KAAKC,IAAIR,UAElB8C,OAGIC,UAAUC,QAAQ,QACxBF,MAAMC,UAAUE,MAAMjD","file":"draft-treeview.min.js","sourcesContent":["/*\n* draft-treeview - A plugin for draft.js that renders nice tree views in the DOM\n* version v0.0.0\n* https://github.com/D1SC0tech/draft-treeview\n*\n* copyright Jordi Pakey-Rodriguez <jordi.orlando@gmail.com>\n* license MIT\n*\n* BUILT: Tue Jan 12 2016 18:52:31 GMT-0600 (CST)\n*/\n(function() {\n  // TODO: allow treeview to be attached to any DOM element\n  // TODO: make each element in the treeview into its own element\n  var treeView = {\n    /*require: [\n      Draft.json\n    ],*/\n\n    createTreeView: function() {\n      var treeView = document.createElement('div');\n      treeView.className = 'tree-view';\n\n      // treeView.appendChild(document.createElement('span'));\n      // treeView.firstChild.textContent = 'Document Model:';\n\n      var pre = document.createElement('pre');\n      treeView.appendChild(pre);\n\n      // Make sure this.dom is initialized\n      this.dom = this.dom || {};\n      this.dom.treeView = treeView;\n\n      this.dom.node.addEventListener('update', function(e) {\n        // e.stopPropagation();\n        e.currentTarget.element.updateTreeView();\n      }, false);\n\n      return this.updateTreeView();\n    },\n\n    updateTreeView: function() {\n      var replacer = function(key, value) {\n        if (key == 'dom' || key == 'doc' || key == 'parent' || key == 'id' || key == 'type' || key == '_events') {\n          return undefined;\n        } else if (key == 'children') {\n          var obj = {};\n          for (let element of value) {\n            obj[element.getID()] = element;\n          }\n          return obj;\n        } else {\n          return value;\n        }\n      };\n\n      var treeString = this.stringify(replacer).split('\"').join('');\n      this.dom.treeView.firstChild.textContent = this.getID() + ': ' + treeString;\n\n      var longestLine = treeString.split('\\n').reduce(function(a, b) {\n        return a.length > b.length ? a : b;\n      });\n      // HACK: change 84 to a non-hardcoded value\n      this.dom.treeView.style.width = Math.min(longestLine.length + 4, 84) + 'ch';\n\n      return this.dom.treeView;\n    }\n  };\n\n  // Draft.extend(Draft.Container, treeView);\n  Draft.Container.require('json');\n  Draft.Container.mixin(treeView);\n\n\n\n  /*var css = document.createElement('link');\n  css.setAttribute('rel', 'stylesheet');\n  css.setAttribute('type', 'text/css');\n  css.setAttribute('href', 'bower_components/draft-treeview/main.css');\n\n  document.getElementsByTagName('head')[0].appendChild(css);*/\n})();\n"],"sourceRoot":"/source/"}