{"version":3,"sources":["draft-treeview.js"],"names":["draft","Container","require","mixin","createTreeView","treeView","document","createElement","className","pre","appendChild","this","dom","node","addEventListener","e","currentTarget","element","updateTreeView","replacer","key","value","obj","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","domID","err","treeString","stringify","split","join","firstChild","textContent","longestLine","reduce","a","b","length","style","width","Math","min"],"mappings":"AAAA,cAUA,WAKEA,MAAMC,UAAUC,QAAQ,QAExBF,MAAMC,UAAUE,OAKdC,eAAc,WACZ,GAAIC,GAAWC,SAASC,cAAc,MACtCF,GAASG,UAAY,WAAY,IAK7BC,GAAMH,SAASC,cAAc,MAYjC,OAXAF,GAASK,YAAYD,GAAKE,KAGrBC,IAAMD,KAAKC,QAChBD,KAAKC,IAAIP,SAAWA,EAEpBM,KAAKC,IAAIC,KAAKC,iBAAiB,SAAU,SAASC,GAEhDA,EAAEC,cAAcC,QAAQC,mBACvB,GAEIP,KAAKO,kBAGdA,eAAc,WACZ,GAAIC,GAAW,SAASC,EAAKC,GAC3B,GAAY,QAARD,GAAyB,WAARA,GACT,QAARA,GAAyB,SAARA,GACT,OAARA,GAAwB,YAARA,EAFpB,CAIO,GAAY,aAARA,EAAoB,CAC7B,GAAIE,MAAAC,GAA4B,EAC5BC,GAAoB,EACpBC,EAAiBC,MAErB,KAHA,IAAA,GAAyBC,GAAzBC,EAAoBP,EAAKQ,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAE,CAKvB,GALKN,GAAOU,EAAAN,KACdC,GAAIL,EAAQgB,OAAShB,GAQrB,MAAOiB,GACPV,GAAoB,EACpBC,EAAiBS,EACjB,QACA,KACOX,GAA6BK,EAAAA,WAChCA,EAAAA,YAEF,QACA,GAAIJ,EACF,KAAMC,IAhBZ,MAAOH,GAGT,MAAOD,KAGLc,EAAaxB,KAAKyB,UAAUjB,GAAUkB,MAAM,KAAKC,KAAK,GAC1D3B,MAAKC,IAAIP,SAASkC,WAAWC,YAAiB7B,KAAKsB,MAAK,KAAKE,CAE7D,IAAIM,GAAcN,EAAWE,MAAM,MAAMK,OAAO,SAASC,EAAGC,GAC1D,MAAOD,GAAEE,OAASD,EAAEC,OAASF,EAAIC,GAMnC,OALGjC,MAEEC,IAAIP,SAASyC,MAAMC,MACnBC,KAAKC,IAAIR,EAAYI,OAAS,EAAG,IAAG,KAElClC,KAAKC,IAAIP","file":"draft-treeview.min.js","sourcesContent":["/*\n* draft-treeview - A plugin for draft.js that renders nice tree views in the DOM\n* version v0.0.0\n* https://github.com/D1SC0tech/draft-treeview\n*\n* copyright Jordi Pakey-Rodriguez <jordi.orlando@gmail.com>\n* license MIT\n*\n* BUILT: Thu Jan 14 2016 17:52:45 GMT-0600 (CST)\n*/\n(function() {\n  // TODO: allow treeview to be attached to any DOM element\n  // TODO: make each element in the treeview into its own element\n\n  // draft.extend(draft.Container, treeView);\n  draft.Container.require('json');\n\n  draft.Container.mixin({\n    /* require: [\n      draft.json\n    ], */\n\n    createTreeView() {\n      var treeView = document.createElement('div');\n      treeView.className = 'tree-view';\n\n      // treeView.appendChild(document.createElement('span'));\n      // treeView.firstChild.textContent = 'Document Model:';\n\n      var pre = document.createElement('pre');\n      treeView.appendChild(pre);\n\n      // Make sure this.dom is initialized\n      this.dom = this.dom || {};\n      this.dom.treeView = treeView;\n\n      this.dom.node.addEventListener('update', function(e) {\n        // e.stopPropagation();\n        e.currentTarget.element.updateTreeView();\n      }, false);\n\n      return this.updateTreeView();\n    },\n\n    updateTreeView() {\n      var replacer = function(key, value) {\n        if (key === 'doc' || key === 'parent' ||\n            key === 'dom' || key === 'type' ||\n            key === 'id' || key === '_events') {\n          return undefined;\n        } else if (key === 'children') {\n          var obj = {};\n          for (var element of value) {\n            obj[element.domID] = element;\n          }\n          return obj;\n        }\n\n        return value;\n      };\n\n      var treeString = this.stringify(replacer).split('\"').join('');\n      this.dom.treeView.firstChild.textContent = `${this.domID}: ${treeString}`;\n\n      var longestLine = treeString.split('\\n').reduce(function(a, b) {\n        return a.length > b.length ? a : b;\n      });\n      // HACK: change 84 to a non-hardcoded value\n      this.dom.treeView.style.width =\n        `${Math.min(longestLine.length + 4, 84)}ch`;\n\n      return this.dom.treeView;\n    }\n  });\n\n\n\n  /* var css = document.createElement('link');\n  css.setAttribute('rel', 'stylesheet');\n  css.setAttribute('type', 'text/css');\n  css.setAttribute('href', 'bower_components/draft-treeview/main.css');\n\n  document.getElementsByTagName('head')[0].appendChild(css); */\n})();\n"],"sourceRoot":"/source/"}